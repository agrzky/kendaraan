(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{21509:function(e,s,t){Promise.resolve().then(t.bind(t,28033)),Promise.resolve().then(t.bind(t,64715)),Promise.resolve().then(t.bind(t,99603))},99603:function(e,s,t){"use strict";t.d(s,{DashboardOverview:function(){return Z}});var a=t(57437),r=t(2265),l=t(66070),i=t(35974),n=t(14296),d=t(86810),o=t(10062),c=t(20407),x=t(77719),h=t(21156),m=t(56940),g=t(97059),p=t(62994),u=t(55487),b=t(77031),f=t(54890),v=t(57662),j=t(70525),y=t(29525),w=t(79205);let N=(0,w.Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),k=(0,w.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),S=(0,w.Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function Z(){let[e,s]=(0,r.useState)({totalVehicles:0,activeServices:0,pendingServices:0,completedThisMonth:0}),[t,w]=(0,r.useState)([]),[Z,M]=(0,r.useState)([]),[z,D]=(0,r.useState)([]),[A,L]=(0,r.useState)([]),[O,W]=(0,r.useState)(!0);(0,r.useEffect)(()=>{C()},[]);let C=async()=>{try{W(!0);let e=await fetch("/api/dashboard/stats"),t=await e.json();if(t.success){let{summary:e,maintenancesByStatus:a,monthlyMaintenances:r,recentMaintenances:l,vehiclesByFuelType:i}=t.data;s({totalVehicles:e.totalVehicles||0,activeServices:e.inProgressServices||0,pendingServices:e.pendingServices||0,completedThisMonth:e.completedThisMonth||0});let n=a.map(e=>({name:"completed"===e.status?"Selesai":"in-progress"===e.status?"Dalam Proses":"Menunggu",value:e._count.status,color:"completed"===e.status?"#10b981":"in-progress"===e.status?"#f59e0b":"#ef4444"}));w(n.length>0?n:[]);let d=i.map(e=>({type:e.fuelType||"Unknown",count:e._count.fuelType}));D(d.length>0?d:[]);let o=l.map(e=>({id:e.id,vehicle:"".concat(e.vehicle.brand," ").concat(e.vehicle.model," - ").concat(e.vehicle.licensePlate),service:e.description,status:e.status||"pending",date:new Date(e.maintenanceDate).toLocaleDateString("id-ID"),cost:e.cost||0}));L(o);let c=new Map,x=["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"];for(let e=5;e>=0;e--){let s=new Date;s.setMonth(s.getMonth()-e);let t="".concat(x[s.getMonth()]);c.set(t,0)}r&&Array.isArray(r)&&r.forEach(e=>{let s=x[new Date(e.maintenanceDate).getMonth()];if(c.has(s)){let t=c.get(s)||0;c.set(s,t+(e._count.id||0))}});let h=Array.from(c.entries()).map(e=>{let[s,t]=e;return{month:s,services:t}});M(h)}}catch(e){console.error("Error fetching dashboard data:",e)}finally{W(!1)}};return(0,a.jsxs)("div",{className:"space-y-6 sm:space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 sm:gap-6",children:[(0,a.jsxs)(l.Zb,{className:"relative overflow-hidden border border-gray-100 shadow-xl bg-white rounded-[2rem] group h-full",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400/20 to-indigo-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative z-10 p-6",children:[(0,a.jsx)(l.ll,{className:"text-sm font-bold text-gray-600 uppercase tracking-wider",children:"Total Kendaraan"}),(0,a.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl shadow-lg shadow-blue-500/30 group-hover:scale-110 transition-transform duration-300",children:(0,a.jsx)(v.Z,{className:"h-5 w-5 text-white"})})]}),(0,a.jsxs)(l.aY,{className:"relative z-10 p-6 pt-0",children:[(0,a.jsx)("div",{className:"text-4xl font-extrabold text-gray-900 mb-2",children:e.totalVehicles}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-500/10 rounded-full w-fit",children:[(0,a.jsx)(j.Z,{className:"h-3 w-3 text-green-600"}),(0,a.jsx)("p",{className:"text-xs font-medium text-green-700",children:"Unit terdaftar"})]})]})]}),(0,a.jsxs)(l.Zb,{className:"relative overflow-hidden border border-gray-100 shadow-xl bg-white rounded-[2rem] group h-full",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-400/20 to-orange-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative z-10 p-6",children:[(0,a.jsx)(l.ll,{className:"text-sm font-bold text-gray-600 uppercase tracking-wider",children:"Servis Aktif"}),(0,a.jsx)("div",{className:"p-3 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl shadow-lg shadow-amber-500/30 group-hover:scale-110 transition-transform duration-300",children:(0,a.jsx)(y.Z,{className:"h-5 w-5 text-white"})})]}),(0,a.jsxs)(l.aY,{className:"relative z-10 p-6 pt-0",children:[(0,a.jsx)("div",{className:"text-4xl font-extrabold text-gray-900 mb-2",children:e.activeServices}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-amber-500/10 rounded-full w-fit",children:[(0,a.jsx)(N,{className:"h-3 w-3 text-amber-600"}),(0,a.jsx)("p",{className:"text-xs font-medium text-amber-700",children:"Dalam proses"})]})]})]}),(0,a.jsxs)(l.Zb,{className:"relative overflow-hidden border border-gray-100 shadow-xl bg-white rounded-[2rem] group h-full",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-red-400/20 to-rose-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative z-10 p-6",children:[(0,a.jsx)(l.ll,{className:"text-sm font-bold text-gray-600 uppercase tracking-wider",children:"Menunggu Servis"}),(0,a.jsx)("div",{className:"p-3 bg-gradient-to-br from-red-500 to-rose-600 rounded-2xl shadow-lg shadow-red-500/30 group-hover:scale-110 transition-transform duration-300",children:(0,a.jsx)(k,{className:"h-5 w-5 text-white"})})]}),(0,a.jsxs)(l.aY,{className:"relative z-10 p-6 pt-0",children:[(0,a.jsx)("div",{className:"text-4xl font-extrabold text-gray-900 mb-2",children:e.pendingServices}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-red-500/10 rounded-full w-fit",children:[(0,a.jsx)(k,{className:"h-3 w-3 text-red-600"}),(0,a.jsx)("p",{className:"text-xs font-medium text-red-700",children:"Perlu tindakan"})]})]})]}),(0,a.jsxs)(l.Zb,{className:"relative overflow-hidden border border-gray-100 shadow-xl bg-white rounded-[2rem] group h-full",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-green-400/20 to-emerald-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative z-10 p-6",children:[(0,a.jsx)(l.ll,{className:"text-sm font-bold text-gray-600 uppercase tracking-wider",children:"Selesai Bulan Ini"}),(0,a.jsx)("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl shadow-lg shadow-green-500/30 group-hover:scale-110 transition-transform duration-300",children:(0,a.jsx)(S,{className:"h-5 w-5 text-white"})})]}),(0,a.jsxs)(l.aY,{className:"relative z-10 p-6 pt-0",children:[(0,a.jsx)("div",{className:"text-4xl font-extrabold text-gray-900 mb-2",children:e.completedThisMonth}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-500/10 rounded-full w-fit",children:[(0,a.jsx)(j.Z,{className:"h-3 w-3 text-green-600"}),(0,a.jsx)("p",{className:"text-xs font-medium text-green-700 text-nowrap",children:"+12% growth"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 sm:gap-8",children:[(0,a.jsx)("div",{className:"h-full",children:(0,a.jsxs)(l.Zb,{className:"border border-gray-100 shadow-xl bg-white rounded-[2rem] h-full",children:[(0,a.jsx)(l.Ol,{className:"pb-4 p-6",children:(0,a.jsxs)(l.ll,{className:"text-lg font-bold text-gray-900 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(N,{className:"w-5 h-5 text-blue-600"})}),"Status Servis"]})}),(0,a.jsx)(l.aY,{className:"p-6 pt-0",children:t.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"h-72",children:(0,a.jsx)(n.h,{width:"100%",height:"100%",children:(0,a.jsxs)(d.u,{children:[(0,a.jsx)(o.by,{data:t,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",cornerRadius:8,stroke:"none",children:t.map((e,s)=>(0,a.jsx)(c.b,{fill:e.color,strokeWidth:0},"cell-".concat(s)))}),(0,a.jsx)(x.u,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.5)",borderRadius:"16px",boxShadow:"0 10px 30px rgba(0,0,0,0.1)",padding:"10px",fontWeight:"bold"},itemStyle:{color:"#374151"},cursor:{fill:"transparent"}})]})})}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:t.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/50 rounded-full border border-gray-100 shadow-sm",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.name}),(0,a.jsx)("span",{className:"text-sm font-bold text-gray-900",children:e.value})]},e.name))})]}):(0,a.jsx)("div",{className:"h-72 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(y.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{className:"text-gray-500 font-medium",children:"Belum ada data servis"})]})})})]})}),(0,a.jsx)("div",{className:"h-full",children:(0,a.jsxs)(l.Zb,{className:"border border-gray-100 shadow-xl bg-white rounded-[2rem] h-full",children:[(0,a.jsx)(l.Ol,{className:"pb-4 p-6",children:(0,a.jsxs)(l.ll,{className:"text-lg font-bold text-gray-900 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(j.Z,{className:"w-5 h-5 text-green-600"})}),"Tren Servis Bulanan"]})}),(0,a.jsx)(l.aY,{className:"p-6 pt-0",children:(0,a.jsx)("div",{className:"h-72",children:(0,a.jsx)(n.h,{width:"100%",height:"100%",children:(0,a.jsxs)(h.w,{data:Z,children:[(0,a.jsx)(m.q,{strokeDasharray:"3 3",vertical:!1,stroke:"rgba(0,0,0,0.05)"}),(0,a.jsx)(g.K,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fill:"#6b7280",fontSize:12,fontWeight:500},dy:10}),(0,a.jsx)(p.B,{axisLine:!1,tickLine:!1,tick:{fill:"#6b7280",fontSize:12,fontWeight:500}}),(0,a.jsx)(x.u,{cursor:{stroke:"#3b82f6",strokeWidth:2,strokeDasharray:"5 5"},contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.5)",borderRadius:"16px",boxShadow:"0 10px 30px rgba(0,0,0,0.1)",padding:"10px",fontWeight:"bold"}}),(0,a.jsx)(u.x1,{type:"monotone",dataKey:"services",stroke:"#3b82f6",strokeWidth:4,dot:{fill:"white",stroke:"#3b82f6",strokeWidth:3,r:6},activeDot:{r:8,stroke:"#3b82f6",strokeWidth:2,fill:"white",className:"animate-pulse"}})]})})})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 sm:gap-8",children:[(0,a.jsx)("div",{className:"h-full",children:(0,a.jsxs)(l.Zb,{className:"border border-gray-100 shadow-xl bg-white rounded-[2rem] h-full",children:[(0,a.jsx)(l.Ol,{className:"pb-4 p-6",children:(0,a.jsxs)(l.ll,{className:"text-lg font-bold text-gray-900 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,a.jsx)(v.Z,{className:"w-5 h-5 text-purple-600"})}),"Jenis Kendaraan"]})}),(0,a.jsx)(l.aY,{className:"p-6 pt-0",children:z.length>0?(0,a.jsx)("div",{className:"h-72",children:(0,a.jsx)(n.h,{width:"100%",height:"100%",children:(0,a.jsxs)(b.v,{data:z,children:[(0,a.jsx)(m.q,{strokeDasharray:"3 3",vertical:!1,stroke:"rgba(0,0,0,0.05)"}),(0,a.jsx)(g.K,{dataKey:"type",axisLine:!1,tickLine:!1,tick:{fill:"#6b7280",fontSize:12,fontWeight:500},dy:10}),(0,a.jsx)(p.B,{axisLine:!1,tickLine:!1,tick:{fill:"#6b7280",fontSize:12,fontWeight:500}}),(0,a.jsx)(x.u,{cursor:{fill:"rgba(139, 92, 246, 0.1)",radius:8},contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.5)",borderRadius:"16px",boxShadow:"0 10px 30px rgba(0,0,0,0.1)",padding:"10px",fontWeight:"bold"}}),(0,a.jsx)(f.$Q,{dataKey:"count",fill:"#8b5cf6",radius:[8,8,8,8],barSize:40,children:z.map((e,s)=>(0,a.jsx)(c.b,{fill:["#8b5cf6","#ec4899","#3b82f6"][s%3]},"cell-".concat(s)))})]})})}):(0,a.jsx)("div",{className:"h-72 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(v.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{className:"text-gray-500 font-medium",children:"Belum ada data kendaraan"})]})})})]})}),(0,a.jsx)("div",{className:"h-full",children:(0,a.jsxs)(l.Zb,{className:"border border-gray-100 shadow-xl bg-white rounded-[2rem] h-full",children:[(0,a.jsx)(l.Ol,{className:"pb-4 p-6",children:(0,a.jsxs)(l.ll,{className:"text-lg font-bold text-gray-900 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,a.jsx)(y.Z,{className:"w-5 h-5 text-orange-600"})}),"Servis Terbaru"]})}),(0,a.jsx)(l.aY,{className:"p-6 pt-0",children:A.length>0?(0,a.jsx)("div",{className:"space-y-3",children:A.map((e,s)=>(0,a.jsxs)("div",{className:"group flex flex-col sm:flex-row sm:items-center justify-between p-4 bg-white/40 hover:bg-white/80 rounded-2xl transition-all duration-300 hover:shadow-lg border border-gray-100 gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-bold text-gray-900 group-hover:text-blue-700 transition-colors duration-200 text-sm sm:text-base truncate",children:e.vehicle}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1 font-medium",children:e.service}),(0,a.jsx)("div",{className:"flex items-center gap-2 mt-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2 py-0.5 bg-gray-100 rounded-full w-fit",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full"}),(0,a.jsx)("p",{className:"text-[10px] text-gray-500 font-semibold",children:e.date})]})})]}),(0,a.jsxs)("div",{className:"flex sm:flex-col items-start sm:items-end justify-between sm:justify-start gap-2",children:[(0,a.jsx)(i.C,{variant:"completed"===e.status?"default":"in-progress"===e.status?"secondary":"destructive",className:"text-xs px-3 py-1 uppercase tracking-wide font-bold shadow-sm ".concat("completed"===e.status?"bg-green-100/80 text-green-700 border-green-200 hover:bg-green-200":"in-progress"===e.status?"bg-yellow-100/80 text-yellow-700 border-yellow-200 hover:bg-yellow-200":"bg-red-100/80 text-red-700 border-red-200 hover:bg-red-200"),children:"completed"===e.status?"Selesai":"in-progress"===e.status?"Proses":"Menunggu"}),(0,a.jsxs)("p",{className:"text-sm font-bold text-gray-900 bg-white/50 px-2 py-1 rounded-lg border border-white/50",children:["Rp ",e.cost.toLocaleString("id-ID")]})]})]},e.id))}):(0,a.jsxs)("div",{className:"py-12 text-center",children:[(0,a.jsx)(y.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{className:"text-gray-500 font-medium",children:"Belum ada riwayat servis"})]})})]})})]})]})}},35974:function(e,s,t){"use strict";t.d(s,{C:function(){return d}});var a=t(57437);t(2265);var r=t(37053),l=t(90535),i=t(94508);let n=(0,l.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:s,variant:t,asChild:l=!1,...d}=e,o=l?r.g7:"span";return(0,a.jsx)(o,{"data-slot":"badge",className:(0,i.cn)(n({variant:t}),s),...d})}}},function(e){e.O(0,[135,365,82,657,971,117,744],function(){return e(e.s=21509)}),_N_E=e.O()}]);