(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[874],{12063:function(e,a,t){Promise.resolve().then(t.bind(t,85453))},85453:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return S}});var r=t(57437),s=t(2265),l=t(33145),n=t(28033),i=t(64715),c=t(66070),d=t(12339),o=t(95186),x=t(26815),h=t(62869),m=t(53647),u=t(76818),p=t(14438),b=t(79205);let j=(0,b.Z)("Fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]]),g=(0,b.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var v=t(51817),f=t(71621);let y=(0,b.Z)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),N=(0,b.Z)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var k=t(18930),w=t(26110),I=t(35299);function S(){var e,a;let t;let[b,S]=(0,s.useState)([]),[D,T]=(0,s.useState)(!1),[C,P]=(0,s.useState)(!0),[L,A]=(0,s.useState)({date:new Date().toISOString().split("T")[0],vehicleId:"",driver:"",fuelType:"",liters:"",pricePerLiter:"",totalCost:"",remarks:""}),[B,_]=(0,s.useState)({date:new Date().toISOString().split("T")[0],vehicleId:"",driver:"",cost:"",remarks:""}),[E,O]=(0,s.useState)(!1),[M,R]=(0,s.useState)([]),[z,V]=(0,s.useState)([]),F=new Date().toISOString().slice(0,7),[K,Z]=(0,s.useState)(F),[G,q]=(0,s.useState)(F),H=M.filter(e=>new Date(e.date).toISOString().slice(0,7)===K),U=z.filter(e=>new Date(e.date).toISOString().slice(0,7)===G),J=H.reduce((e,a)=>e+(a.liters||0),0),Q=H.reduce((e,a)=>e+(a.totalCost||0),0),Y=U.reduce((e,a)=>e+(a.cost||0),0),W=b.find(e=>e.id===B.vehicleId);(0,s.useEffect)(()=>{L.vehicleId?$(L.vehicleId):R([])},[L.vehicleId]),(0,s.useEffect)(()=>{B.vehicleId?X(B.vehicleId):V([])},[B.vehicleId]);let $=async e=>{O(!0);try{let a=await fetch("/api/fuel");if(a.ok){let t=await a.json();if(t.success){let a=t.records.filter(a=>a.vehicleId===e).sort((e,a)=>new Date(e.date).getTime()-new Date(a.date).getTime());R(a)}}}catch(e){console.error("Error fetching records:",e)}finally{O(!1)}},X=async e=>{O(!0);try{let a=await fetch("/api/toll");if(a.ok){let t=await a.json();if(t.success){let a=t.records.filter(a=>a.vehicleId===e).sort((e,a)=>new Date(e.date).getTime()-new Date(a.date).getTime());V(a)}}}catch(e){console.error("Error fetching toll records:",e)}finally{O(!1)}},[ee,ea]=(0,s.useState)(null),[et,er]=(0,s.useState)({}),[es,el]=(0,s.useState)(!1),en=async e=>{try{(await fetch("/api/toll?id=".concat(e),{method:"DELETE"})).ok?(p.A.success("Data Tol berhasil dihapus"),B.vehicleId&&X(B.vehicleId)):p.A.error("Gagal menghapus data Tol")}catch(e){p.A.error("Terjadi kesalahan")}},ei=async e=>{e.preventDefault(),el(!0);try{(await fetch("/api/toll",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(et)})).ok?(p.A.success("Data Tol berhasil diperbarui"),ea(null),B.vehicleId&&X(B.vehicleId)):p.A.error("Gagal memperbarui data Tol")}catch(e){p.A.error("Terjadi kesalahan")}finally{el(!1)}};(0,s.useEffect)(()=>{ec()},[]);let ec=async()=>{try{let e=await fetch("/api/vehicles"),a=await e.json();a.success&&S(a.vehicles)}catch(e){console.error("Error fetching vehicles:",e),p.A.error("Gagal memuat data kendaraan")}finally{P(!1)}},ed=async e=>{e.preventDefault(),T(!0);try{(await fetch("/api/fuel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)})).ok?(p.A.success("Data BBM berhasil disimpan!"),A({...L,liters:"",pricePerLiter:"",totalCost:"",remarks:""}),L.vehicleId&&$(L.vehicleId)):p.A.error("Gagal menyimpan data BBM")}catch(e){console.error(e),p.A.error("Terjadi kesalahan saat menyimpan")}finally{T(!1)}},eo=async e=>{try{(await fetch("/api/fuel?id=".concat(e),{method:"DELETE"})).ok?(p.A.success("Data berhasil dihapus"),L.vehicleId&&$(L.vehicleId)):p.A.error("Gagal menghapus data")}catch(e){p.A.error("Terjadi kesalahan")}},[ex,eh]=(0,s.useState)(null),[em,eu]=(0,s.useState)({}),[ep,eb]=(0,s.useState)(!1),ej=e=>{eh(e),eu({...e,date:new Date(e.date).toISOString().split("T")[0],totalCost:e.totalCost.toString(),pricePerLiter:e.pricePerLiter.toString(),liters:e.liters.toString()})},eg=async e=>{e.preventDefault(),eb(!0);try{(await fetch("/api/fuel",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(em)})).ok?(p.A.success("Data berhasil diperbarui"),eh(null),L.vehicleId&&$(L.vehicleId)):p.A.error("Gagal memperbarui data")}catch(e){p.A.error("Terjadi kesalahan")}finally{eb(!1)}};(0,s.useEffect)(()=>{if(ex&&em.liters&&em.pricePerLiter){let e=parseFloat(em.liters)*parseFloat(em.pricePerLiter);isNaN(e)||eu(a=>({...a,totalCost:e.toString()}))}},[em.liters,em.pricePerLiter]);let ev=async e=>{e.preventDefault(),T(!0);try{(await fetch("/api/toll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)})).ok?(p.A.success("Data Tol berhasil disimpan!"),_({...B,cost:"",remarks:""}),B.vehicleId&&X(B.vehicleId)):p.A.error("Gagal menyimpan data Tol")}catch(e){console.error(e),p.A.error("Terjadi kesalahan saat menyimpan")}finally{T(!1)}};(0,s.useEffect)(()=>{if(L.liters&&L.pricePerLiter){let e=parseFloat(L.liters)*parseFloat(L.pricePerLiter);isNaN(e)||A(a=>({...a,totalCost:e.toString()}))}},[L.liters,L.pricePerLiter]),(0,s.useEffect)(()=>{L.vehicleId&&b.find(e=>e.id===L.vehicleId)&&A(e=>({...e,fuelType:"Pertalite"}))},[L.vehicleId,b]);let ef=b.find(e=>e.id===L.vehicleId),ey=ef&&["F 6878 G","F 2716 F"].includes(ef.licensePlate),eN=W&&["F 6878 G","F 2716 F"].includes(W.licensePlate),ek=e=>{let[a,t]=e.split("-").map(Number);return new Date(a,t,0)},ew=ek(K),eI=ek(G);return(0,r.jsx)(n.AuthGuard,{children:(0,r.jsxs)(i.DashboardLayout,{children:[(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          @media print {\n            body * {\n              visibility: hidden;\n            }\n            .print-area, .print-area * {\n              visibility: visible;\n            }\n            .print-area {\n              position: absolute;\n              left: 0;\n              top: 0;\n              width: 100%;\n            }\n            /* Hide buttons during print */\n            .no-print {\n              display: none !important;\n            }\n            /* Ensure table borders are visible */\n            table, th, td {\n              border: 1px solid black !important;\n            }\n            /* Remove shadows for clean print */\n            .print-area, .print-area * {\n              box-shadow: none !important;\n            }\n          }\n        "}}),(0,r.jsx)(w.Vq,{open:!!ex,onOpenChange:e=>!e&&eh(null),children:(0,r.jsxs)(w.cZ,{className:"max-w-xl",children:[(0,r.jsxs)(w.fK,{children:[(0,r.jsx)(w.$N,{children:"Edit Data BBM"}),(0,r.jsx)(w.Be,{children:"Ubah detail data pengisian BBM."})]}),(0,r.jsxs)("form",{onSubmit:eg,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Tanggal"}),(0,r.jsx)(o.I,{type:"date",required:!0,value:em.date||"",onChange:e=>eu({...em,date:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Driver"}),(0,r.jsx)(o.I,{value:em.driver||"",onChange:e=>eu({...em,driver:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Liter"}),(0,r.jsx)(o.I,{type:"number",step:"0.01",required:!0,value:em.liters||"",onChange:e=>eu({...em,liters:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Harga/Liter"}),(0,r.jsx)(o.I,{type:"number",required:!0,value:em.pricePerLiter||"",onChange:e=>eu({...em,pricePerLiter:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,r.jsx)(x._,{children:"Total Biaya"}),(0,r.jsx)(o.I,{value:parseInt(em.totalCost||"0").toLocaleString("id-ID"),disabled:!0,className:"bg-gray-100 font-bold"})]})]}),(0,r.jsxs)(w.cN,{children:[(0,r.jsx)(h.z,{type:"button",variant:"outline",onClick:()=>eh(null),children:"Batal"}),(0,r.jsxs)(h.z,{type:"submit",disabled:ep,children:[" ","Simpan Perubahan"," "]})]})]})]})}),(0,r.jsxs)("div",{className:"space-y-6 max-w-4xl mx-auto",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"Rekap BBM & Tol"})}),(0,r.jsxs)(d.mQ,{defaultValue:"bbm",className:"w-full",children:[(0,r.jsxs)(d.dr,{className:"grid w-full grid-cols-2 h-14 p-1 bg-slate-100/80 rounded-2xl mb-6",children:[(0,r.jsxs)(d.SP,{value:"bbm",className:"rounded-xl h-12 text-sm font-bold data-[state=active]:bg-white data-[state=active]:text-orange-600 data-[state=active]:shadow-md transition-all",children:[(0,r.jsx)(j,{className:"w-4 h-4 mr-2"}),"Input BBM"]}),(0,r.jsxs)(d.SP,{value:"tol",className:"rounded-xl h-12 text-sm font-bold data-[state=active]:bg-white data-[state=active]:text-blue-600 data-[state=active]:shadow-md transition-all",children:[(0,r.jsx)(g,{className:"w-4 h-4 mr-2"}),"Input TOL"]})]}),(0,r.jsxs)(d.nU,{value:"bbm",className:"mt-0",children:[(0,r.jsxs)(c.Zb,{className:"border-0 shadow-xl bg-white rounded-[2rem] overflow-hidden",children:[(0,r.jsxs)(c.Ol,{className:"bg-orange-50/50 border-b border-orange-100 px-8 py-6",children:[(0,r.jsxs)(c.ll,{className:"flex items-center gap-3 text-orange-900",children:[(0,r.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,r.jsx)(j,{className:"w-5 h-5 text-orange-600"})}),"Form Pengisian BBM"]}),(0,r.jsx)(c.SZ,{children:"Catat pengeluaran bahan bakar kendaraan operasional."})]}),(0,r.jsx)(c.aY,{className:"p-8",children:(0,r.jsxs)("form",{onSubmit:ed,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Tanggal"}),(0,r.jsx)(o.I,{type:"date",required:!0,value:L.date,onChange:e=>A({...L,date:e.target.value}),className:"rounded-xl"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Kendaraan"}),(0,r.jsxs)(m.Ph,{value:L.vehicleId,onValueChange:e=>A({...L,vehicleId:e}),required:!0,children:[(0,r.jsx)(m.i4,{className:"rounded-xl",children:(0,r.jsx)(m.ki,{placeholder:"Pilih Kendaraan"})}),(0,r.jsx)(m.Bw,{children:b.map(e=>(0,r.jsxs)(m.Ql,{value:e.id,children:[e.licensePlate," - ",e.brand," ",e.model]},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Driver"}),(0,r.jsx)(o.I,{placeholder:"Nama Pengemudi",value:L.driver,onChange:e=>A({...L,driver:e.target.value}),className:"rounded-xl"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Jenis BBM"}),(0,r.jsxs)(m.Ph,{value:L.fuelType,onValueChange:e=>A({...L,fuelType:e}),children:[(0,r.jsx)(m.i4,{className:"rounded-xl",children:(0,r.jsx)(m.ki,{placeholder:"Pilih Jenis BBM"})}),(0,r.jsxs)(m.Bw,{children:[(0,r.jsx)(m.Ql,{value:"Pertalite",children:"Pertalite"}),(0,r.jsx)(m.Ql,{value:"Pertamax",children:"Pertamax"}),(0,r.jsx)(m.Ql,{value:"Pertamax Turbo",children:"Pertamax Turbo"}),(0,r.jsx)(m.Ql,{value:"Solar",children:"Solar / Bio Solar"}),(0,r.jsx)(m.Ql,{value:"Dexlite",children:"Dexlite"}),(0,r.jsx)(m.Ql,{value:"Pertamina Dex",children:"Pertamina Dex"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Jumlah Liter"}),(0,r.jsx)(o.I,{type:"number",step:"0.01",placeholder:"0.00",required:!0,value:L.liters,onChange:e=>A({...L,liters:e.target.value}),className:"rounded-xl"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Harga per Liter (Rp)"}),(0,r.jsx)(o.I,{type:"number",placeholder:"0",required:!0,value:L.pricePerLiter,onChange:e=>A({...L,pricePerLiter:e.target.value}),className:"rounded-xl"})]})]}),(0,r.jsxs)("div",{className:"p-4 bg-orange-50 rounded-xl border border-orange-100 flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-bold text-orange-800",children:"Total Biaya"}),(0,r.jsxs)("span",{className:"text-xl font-extrabold text-orange-600",children:["Rp"," ",parseInt(L.totalCost||"0").toLocaleString("id-ID")]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Keterangan Tambahan"}),(0,r.jsx)(u.g,{placeholder:"Catatan...",value:L.remarks,onChange:e=>A({...L,remarks:e.target.value}),className:"rounded-xl resize-none"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,r.jsx)(h.z,{type:"button",variant:"outline",className:"rounded-xl",children:"Batal"}),(0,r.jsxs)(h.z,{type:"submit",disabled:D,className:"bg-orange-600 hover:bg-orange-700 text-white rounded-xl min-w-[140px]",children:[D?(0,r.jsx)(v.Z,{className:"w-4 h-4 animate-spin mr-2"}):(0,r.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Simpan Data BBM"]})]})]})})]}),ef&&(0,r.jsxs)(c.Zb,{className:"border-0 shadow-xl bg-white rounded-[2rem] overflow-hidden mt-6 print-area",children:[(0,r.jsxs)(c.Ol,{className:"bg-white px-4 py-2 border-b border-gray-100 flex flex-row items-center justify-between",children:[(0,r.jsx)("div",{className:"w-[100px] flex justify-start",children:(0,r.jsx)(l.default,{src:"/logo-bkn.png",alt:"Logo BKN",width:60,height:60,className:"object-contain"})}),(0,r.jsx)("div",{className:"flex-1 text-center",children:(0,r.jsxs)(c.ll,{className:"font-bold text-black uppercase text-lg leading-snug",children:["REKAPITULASI BBM KENDARAAN ",ey?"RODA 2":"RODA 4",(0,r.jsxs)("div",{className:"text-xl mt-1",children:["(",ef.licensePlate,")"]})]})}),(0,r.jsx)("div",{className:"w-[100px] flex justify-end",children:(0,r.jsxs)(h.z,{variant:"outline",onClick:()=>window.print(),className:"no-print gap-2 border-gray-300 hover:bg-gray-100",children:[(0,r.jsx)(y,{className:"w-4 h-4"})," Print"]})})]}),(0,r.jsxs)(c.aY,{className:"p-4 overflow-x-auto",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center gap-3 no-print",children:[(0,r.jsx)(x._,{className:"text-sm font-medium text-gray-700",children:"Periode:"}),(0,r.jsx)(o.I,{type:"month",value:K,onChange:e=>Z(e.target.value),className:"w-48"})]}),(0,r.jsxs)("div",{className:"min-w-full inline-block align-middle",children:[(0,r.jsx)("div",{className:"border border-black",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-black",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-white",children:[(0,r.jsx)("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black w-12",children:"NO"}),(0,r.jsx)("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black",children:"TANGGAL"}),(0,r.jsx)("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black",children:"LITER"}),(0,r.jsx)("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black",children:"HARGA SATUAN"}),(0,r.jsx)("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black",children:"JUMLAH"}),(0,r.jsx)("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black width-24 no-print",children:"AKSI"})]})}),(0,r.jsxs)("tbody",{className:"divide-y divide-black",children:[H.length>0?(t=0,H.map((e,a)=>{var s,l,n;let i=a>0&&new Date(e.date).toDateString()===new Date(H[a-1].date).toDateString();return!i&&t++,(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black font-medium",children:!i&&t}),(0,r.jsx)("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black",children:!i&&new Date(e.date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}),(0,r.jsx)("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black",children:null===(s=e.liters)||void 0===s?void 0:s.toLocaleString("id-ID",{minimumFractionDigits:3,maximumFractionDigits:3})}),(0,r.jsx)("td",{className:"px-3 py-2 text-right text-sm text-black border-r border-black",children:(0,r.jsxs)("div",{className:"flex justify-between w-full px-2",children:[(0,r.jsx)("span",{children:"Rp"}),(0,r.jsx)("span",{children:null===(l=e.pricePerLiter)||void 0===l?void 0:l.toLocaleString("id-ID")})]})}),(0,r.jsx)("td",{className:"px-3 py-2 text-right text-sm text-black font-medium border-r border-black",children:(0,r.jsxs)("div",{className:"flex justify-between w-full px-2",children:[(0,r.jsx)("span",{children:"Rp"}),(0,r.jsx)("span",{children:null===(n=e.totalCost)||void 0===n?void 0:n.toLocaleString("id-ID")})]})}),(0,r.jsx)("td",{className:"px-3 py-2 text-center no-print border-r border-black",children:(0,r.jsxs)("div",{className:"flex justify-center gap-1",children:[(0,r.jsx)(h.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-600 hover:text-blue-800 hover:bg-blue-50",onClick:()=>ej(e),children:(0,r.jsx)(N,{className:"w-4 h-4"})}),(0,r.jsxs)(I.aR,{children:[(0,r.jsx)(I.vW,{asChild:!0,children:(0,r.jsx)(h.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600 hover:text-red-800 hover:bg-red-50",children:(0,r.jsx)(k.Z,{className:"w-4 h-4"})})}),(0,r.jsxs)(I._T,{children:[(0,r.jsxs)(I.fY,{children:[(0,r.jsx)(I.f$,{children:"Hapus Data?"}),(0,r.jsx)(I.yT,{children:"Data ini akan dihapus permanen."})]}),(0,r.jsxs)(I.xo,{children:[(0,r.jsx)(I.le,{children:"Batal"}),(0,r.jsx)(I.OL,{onClick:()=>eo(e.id),className:"bg-red-600",children:"Hapus"})]})]})]})]})})]},e.id)})):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:6,className:"px-3 py-8 text-center text-sm text-gray-500 italic",children:"Belum ada data untuk kendaraan ini"})}),(0,r.jsxs)("tr",{className:"bg-white font-bold border-t-2 border-black",children:[(0,r.jsx)("td",{colSpan:2,className:"px-3 py-2 text-center text-sm text-black border-r border-black uppercase tracking-wider",children:"TOTAL"}),(0,r.jsx)("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black",children:J.toLocaleString("id-ID",{minimumFractionDigits:3,maximumFractionDigits:3})}),(0,r.jsx)("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black bg-gray-100"}),(0,r.jsx)("td",{className:"px-3 py-2 text-right text-sm text-black",children:(0,r.jsxs)("div",{className:"flex justify-between w-full px-2",children:[(0,r.jsx)("span",{children:"Rp"}),(0,r.jsx)("span",{children:Q.toLocaleString("id-ID")})]})}),(0,r.jsx)("td",{className:"no-print"})]})]})]})}),(0,r.jsx)("div",{className:"mt-12 flex justify-end",children:(0,r.jsxs)("div",{className:"text-center w-64",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-black mb-1",children:["Bogor,"," ",ew.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})]}),(0,r.jsx)("p",{className:"text-sm font-medium text-black mb-16",children:"Mengetahui,"}),(0,r.jsx)("p",{className:"text-sm font-bold text-black",children:(null===(e=H.filter(e=>e.driver).pop())||void 0===e?void 0:e.driver)||""})]})})]})]})]})]}),(0,r.jsxs)(d.nU,{value:"tol",className:"mt-0",children:[(0,r.jsxs)(c.Zb,{className:"border-0 shadow-xl bg-white rounded-[2rem] overflow-hidden",children:[(0,r.jsxs)(c.Ol,{className:"bg-blue-50/50 border-b border-blue-100 px-8 py-6",children:[(0,r.jsxs)(c.ll,{className:"flex items-center gap-3 text-blue-900",children:[(0,r.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,r.jsx)(g,{className:"w-5 h-5 text-blue-600"})}),"Form Pengeluaran TOL"]}),(0,r.jsx)(c.SZ,{children:"Catat biaya e-Toll untuk perjalanan dinas."})]}),(0,r.jsx)(c.aY,{className:"p-8",children:(0,r.jsxs)("form",{onSubmit:ev,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Tanggal"}),(0,r.jsx)(o.I,{type:"date",required:!0,value:B.date,onChange:e=>_({...B,date:e.target.value}),className:"rounded-xl"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Kendaraan"}),(0,r.jsxs)(m.Ph,{value:B.vehicleId,onValueChange:e=>_({...B,vehicleId:e}),required:!0,children:[(0,r.jsx)(m.i4,{className:"rounded-xl",children:(0,r.jsx)(m.ki,{placeholder:"Pilih Kendaraan"})}),(0,r.jsx)(m.Bw,{children:b.map(e=>(0,r.jsxs)(m.Ql,{value:e.id,children:[e.licensePlate," - ",e.brand," ",e.model]},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Driver"}),(0,r.jsx)(o.I,{placeholder:"Nama Pengemudi",value:B.driver,onChange:e=>_({...B,driver:e.target.value}),className:"rounded-xl"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Biaya Tol (Rp)"}),(0,r.jsx)(o.I,{type:"number",placeholder:"0",required:!0,value:B.cost,onChange:e=>_({...B,cost:e.target.value}),className:"rounded-xl"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Keterangan Tambahan"}),(0,r.jsx)(u.g,{placeholder:"Catatan...",value:B.remarks,onChange:e=>_({...B,remarks:e.target.value}),className:"rounded-xl resize-none"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,r.jsx)(h.z,{type:"button",variant:"outline",className:"rounded-xl",children:"Batal"}),(0,r.jsxs)(h.z,{type:"submit",disabled:D,className:"bg-blue-600 hover:bg-blue-700 text-white rounded-xl min-w-[140px]",children:[D?(0,r.jsx)(v.Z,{className:"w-4 h-4 animate-spin mr-2"}):(0,r.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Simpan Data Tol"]})]})]})})]}),W&&(0,r.jsxs)(c.Zb,{className:"border-0 shadow-xl bg-white rounded-[2rem] overflow-hidden mt-6 print-area",children:[(0,r.jsxs)(c.Ol,{className:"bg-white px-4 py-2 border-b border-gray-100 flex flex-row items-center justify-between",children:[(0,r.jsx)("div",{className:"w-[100px] flex justify-start",children:(0,r.jsx)(l.default,{src:"/logo-bkn.png",alt:"Logo BKN",width:60,height:60,className:"object-contain"})}),(0,r.jsx)("div",{className:"flex-1 text-center",children:(0,r.jsxs)(c.ll,{className:"font-bold text-black uppercase text-lg leading-snug",children:["REKAPITULASI E-TOL KENDARAAN ",eN?"RODA 2":"RODA 4",(0,r.jsxs)("div",{className:"text-xl mt-1",children:["(",W.licensePlate,")"]})]})}),(0,r.jsx)("div",{className:"w-[100px] flex justify-end",children:(0,r.jsxs)(h.z,{variant:"outline",onClick:()=>window.print(),className:"no-print gap-2 border-gray-300 hover:bg-gray-100",children:[(0,r.jsx)(y,{className:"w-4 h-4"})," Print"]})})]}),(0,r.jsxs)(c.aY,{className:"p-4 overflow-x-auto",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center gap-3 no-print",children:[(0,r.jsx)(x._,{className:"text-sm font-medium text-gray-700",children:"Periode:"}),(0,r.jsx)(o.I,{type:"month",value:G,onChange:e=>q(e.target.value),className:"w-48"})]}),(0,r.jsxs)("div",{className:"min-w-full inline-block align-middle",children:[(0,r.jsx)("div",{className:"border border-black",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-black",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-white",children:[(0,r.jsx)("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black w-12",children:"NO"}),(0,r.jsx)("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black",children:"TANGGAL"}),(0,r.jsx)("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black",children:"HARGA SATUAN"}),(0,r.jsx)("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black",children:"JUMLAH VOLUME"}),(0,r.jsx)("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black",children:"JUMLAH"}),(0,r.jsx)("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black width-24 no-print",children:"AKSI"})]})}),(0,r.jsxs)("tbody",{className:"divide-y divide-black",children:[U.length>0?(()=>{let e=new Map;U.forEach(a=>{let t=new Date(a.date).toDateString();e.has(t)||e.set(t,new Map);let r=e.get(t),s=Number(a.cost)||0;r.has(s)||r.set(s,{count:0,total:0,records:[]});let l=r.get(s);l.count+=1,l.total+=s,l.records.push(a)});let a=0,t=[];return e.forEach((e,s)=>{a++;let l=!0;e.forEach((e,n)=>{t.push((0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black font-medium",children:l?a:""}),(0,r.jsx)("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black",children:l?new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}):""}),(0,r.jsx)("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black",children:(0,r.jsxs)("div",{className:"flex justify-between w-full px-2",children:[(0,r.jsx)("span",{children:"Rp"}),(0,r.jsx)("span",{children:Number(n).toLocaleString("id-ID")})]})}),(0,r.jsx)("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black",children:e.count}),(0,r.jsx)("td",{className:"px-3 py-2 text-right text-sm text-black font-medium border-r border-black",children:(0,r.jsxs)("div",{className:"flex justify-between w-full px-2",children:[(0,r.jsx)("span",{children:"Rp"}),(0,r.jsx)("span",{children:e.total.toLocaleString("id-ID")})]})}),(0,r.jsx)("td",{className:"px-3 py-2 text-center no-print border-r border-black",children:(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsxs)(I.aR,{children:[(0,r.jsx)(I.vW,{asChild:!0,children:(0,r.jsx)(h.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600 hover:text-red-800 hover:bg-red-50",children:(0,r.jsx)(k.Z,{className:"w-4 h-4"})})}),(0,r.jsxs)(I._T,{children:[(0,r.jsxs)(I.fY,{children:[(0,r.jsxs)(I.f$,{children:["Hapus ",e.count," Data?"]}),(0,r.jsx)(I.yT,{children:e.count>1?"Semua ".concat(e.count," transaksi dengan harga Rp ").concat(Number(n).toLocaleString("id-ID")," pada tanggal ini akan dihapus permanen."):"Data ini akan dihapus permanen."})]}),(0,r.jsxs)(I.xo,{children:[(0,r.jsx)(I.le,{children:"Batal"}),(0,r.jsx)(I.OL,{onClick:()=>{e.records.forEach(e=>en(e.id))},className:"bg-red-600",children:"Hapus"})]})]})]})})})]},"".concat(s,"-").concat(n))),l=!1})}),t})():(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:5,className:"px-3 py-8 text-center text-sm text-gray-500 italic",children:"Belum ada data untuk kendaraan ini"})}),(0,r.jsxs)("tr",{className:"bg-white font-bold border-t-2 border-black",children:[(0,r.jsx)("td",{colSpan:4,className:"px-3 py-2 text-center text-sm text-black border-r border-black uppercase tracking-wider",children:"TOTAL"}),(0,r.jsx)("td",{className:"px-3 py-2 text-right text-sm text-black font-medium border-r border-black",children:(0,r.jsxs)("div",{className:"flex justify-between w-full px-2",children:[(0,r.jsx)("span",{children:"Rp"}),(0,r.jsx)("span",{children:Y.toLocaleString("id-ID")})]})}),(0,r.jsx)("td",{className:"no-print"})]})]})]})}),(0,r.jsx)("div",{className:"mt-12 flex justify-end",children:(0,r.jsxs)("div",{className:"text-center w-64",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-black mb-1",children:["Bogor,"," ",eI.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})]}),(0,r.jsx)("p",{className:"text-sm font-medium text-black mb-16",children:"Mengetahui,"}),(0,r.jsx)("p",{className:"text-sm font-bold text-black",children:(null===(a=U.filter(e=>e.driver).pop())||void 0===a?void 0:a.driver)||""})]})})]})]})]})]})]}),(0,r.jsx)(w.Vq,{open:!!ee,onOpenChange:e=>!e&&ea(null),children:(0,r.jsxs)(w.cZ,{className:"max-w-xl",children:[(0,r.jsxs)(w.fK,{children:[(0,r.jsx)(w.$N,{children:"Edit Data Tol"}),(0,r.jsx)(w.Be,{children:"Ubah detail data pengeluaran Tol."})]}),(0,r.jsxs)("form",{onSubmit:ei,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Tanggal"}),(0,r.jsx)(o.I,{type:"date",required:!0,value:et.date||"",onChange:e=>er({...et,date:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{children:"Driver"}),(0,r.jsx)(o.I,{value:et.driver||"",onChange:e=>er({...et,driver:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,r.jsx)(x._,{children:"Biaya Tol"}),(0,r.jsx)(o.I,{type:"number",required:!0,value:et.cost||"",onChange:e=>er({...et,cost:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,r.jsx)(x._,{children:"Keterangan"}),(0,r.jsx)(o.I,{value:et.remarks||"",onChange:e=>er({...et,remarks:e.target.value})})]})]}),(0,r.jsxs)(w.cN,{children:[(0,r.jsx)(h.z,{type:"button",variant:"outline",onClick:()=>ea(null),children:"Batal"}),(0,r.jsxs)(h.z,{type:"submit",disabled:es,children:[" ","Simpan Perubahan"," "]})]})]})]})})]})]})})}},12339:function(e,a,t){"use strict";t.d(a,{SP:function(){return c},dr:function(){return i},mQ:function(){return n},nU:function(){return d}});var r=t(57437);t(2265);var s=t(20271),l=t(94508);function n(e){let{className:a,...t}=e;return(0,r.jsx)(s.fC,{"data-slot":"tabs",className:(0,l.cn)("flex flex-col gap-2",a),...t})}function i(e){let{className:a,...t}=e;return(0,r.jsx)(s.aV,{"data-slot":"tabs-list",className:(0,l.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...t})}function c(e){let{className:a,...t}=e;return(0,r.jsx)(s.xz,{"data-slot":"tabs-trigger",className:(0,l.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...t})}function d(e){let{className:a,...t}=e;return(0,r.jsx)(s.VY,{"data-slot":"tabs-content",className:(0,l.cn)("flex-1 outline-none",a),...t})}},76818:function(e,a,t){"use strict";t.d(a,{g:function(){return l}});var r=t(57437);t(2265);var s=t(94508);function l(e){let{className:a,...t}=e;return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...t})}},51817:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},20271:function(e,a,t){"use strict";t.d(a,{VY:function(){return L},aV:function(){return C},fC:function(){return T},xz:function(){return P}});var r=t(2265),s=t(6741),l=t(73966),n=t(1353),i=t(71599),c=t(66840),d=t(29114),o=t(80886),x=t(99255),h=t(57437),m="Tabs",[u,p]=(0,l.b)(m,[n.Pc]),b=(0,n.Pc)(),[j,g]=u(m),v=r.forwardRef((e,a)=>{let{__scopeTabs:t,value:r,onValueChange:s,defaultValue:l,orientation:n="horizontal",dir:i,activationMode:m="automatic",...u}=e,p=(0,d.gm)(i),[b,g]=(0,o.T)({prop:r,onChange:s,defaultProp:l});return(0,h.jsx)(j,{scope:t,baseId:(0,x.M)(),value:b,onValueChange:g,orientation:n,dir:p,activationMode:m,children:(0,h.jsx)(c.WV.div,{dir:p,"data-orientation":n,...u,ref:a})})});v.displayName=m;var f="TabsList",y=r.forwardRef((e,a)=>{let{__scopeTabs:t,loop:r=!0,...s}=e,l=g(f,t),i=b(t);return(0,h.jsx)(n.fC,{asChild:!0,...i,orientation:l.orientation,dir:l.dir,loop:r,children:(0,h.jsx)(c.WV.div,{role:"tablist","aria-orientation":l.orientation,...s,ref:a})})});y.displayName=f;var N="TabsTrigger",k=r.forwardRef((e,a)=>{let{__scopeTabs:t,value:r,disabled:l=!1,...i}=e,d=g(N,t),o=b(t),x=S(d.baseId,r),m=D(d.baseId,r),u=r===d.value;return(0,h.jsx)(n.ck,{asChild:!0,...o,focusable:!l,active:u,children:(0,h.jsx)(c.WV.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":m,"data-state":u?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:x,...i,ref:a,onMouseDown:(0,s.M)(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(r)}),onKeyDown:(0,s.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(r)}),onFocus:(0,s.M)(e.onFocus,()=>{let e="manual"!==d.activationMode;u||l||!e||d.onValueChange(r)})})})});k.displayName=N;var w="TabsContent",I=r.forwardRef((e,a)=>{let{__scopeTabs:t,value:s,forceMount:l,children:n,...d}=e,o=g(w,t),x=S(o.baseId,s),m=D(o.baseId,s),u=s===o.value,p=r.useRef(u);return r.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,h.jsx)(i.z,{present:l||u,children:t=>{let{present:r}=t;return(0,h.jsx)(c.WV.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":x,hidden:!r,id:m,tabIndex:0,...d,ref:a,style:{...e.style,animationDuration:p.current?"0s":void 0},children:r&&n})}})});function S(e,a){return"".concat(e,"-trigger-").concat(a)}function D(e,a){return"".concat(e,"-content-").concat(a)}I.displayName=w;var T=v,C=y,P=k,L=I}},function(e){e.O(0,[135,365,438,508,657,175,971,117,744],function(){return e(e.s=12063)}),_N_E=e.O()}]);