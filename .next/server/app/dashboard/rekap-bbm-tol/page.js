(()=>{var e={};e.id=874,e.ids=[874],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},79553:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c}),t(33135),t(11506),t(35866);var r=t(23191),s=t(88716),l=t(37922),i=t.n(l),n=t(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(a,d);let c=["",{children:["dashboard",{children:["rekap-bbm-tol",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,33135)),"D:\\kendaraan\\app\\dashboard\\rekap-bbm-tol\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,11506)),"D:\\kendaraan\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\kendaraan\\app\\dashboard\\rekap-bbm-tol\\page.tsx"],x="/dashboard/rekap-bbm-tol/page",h={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/rekap-bbm-tol/page",pathname:"/dashboard/rekap-bbm-tol",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},83635:(e,a,t)=>{Promise.resolve().then(t.bind(t,68120))},68120:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>S});var r=t(10326),s=t(17577),l=t(58894),i=t(63207),n=t(33071),d=t(73427),c=t(54432),o=t(31048),x=t(90772),h=t(34474),m=t(87673),p=t(85999),u=t(62881);let b=(0,u.Z)("Fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]]),j=(0,u.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var g=t(77506),v=t(95964);let y=(0,u.Z)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),f=(0,u.Z)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var N=t(98091),k=t(62288),w=t(27510);let D=(0,s.memo)(function({size:e=60}){return r.jsx("div",{role:"img","aria-label":"Logo BKN",style:{width:e,height:e,backgroundImage:'url("/logo-bkn.png")',backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})},()=>!0);function S(){let e;let[a,t]=(0,s.useState)([]),[u,S]=(0,s.useState)(!1),[I,T]=(0,s.useState)(!0),[P,C]=(0,s.useState)({date:new Date().toISOString().split("T")[0],vehicleId:"",driver:"",fuelType:"",liters:"",pricePerLiter:"",totalCost:"",remarks:""}),[A,L]=(0,s.useState)({date:new Date().toISOString().split("T")[0],vehicleId:"",driver:"",cost:"",remarks:""}),[_,B]=(0,s.useState)(!1),[M,O]=(0,s.useState)([]),[R,z]=(0,s.useState)([]),E=new Date().toISOString().slice(0,7),[q,Z]=(0,s.useState)(E),[G,K]=(0,s.useState)(E),V=M.filter(e=>new Date(e.date).toISOString().slice(0,7)===q),F=R.filter(e=>new Date(e.date).toISOString().slice(0,7)===G),H=V.reduce((e,a)=>e+(a.liters||0),0),U=V.reduce((e,a)=>e+(a.totalCost||0),0),$=F.reduce((e,a)=>e+(a.cost||0),0),J=a.find(e=>e.id===A.vehicleId),Q=async e=>{B(!0);try{let a=await fetch("/api/fuel");if(a.ok){let t=await a.json();if(t.success){let a=t.records.filter(a=>a.vehicleId===e).sort((e,a)=>new Date(e.date).getTime()-new Date(a.date).getTime());O(a)}}}catch(e){console.error("Error fetching records:",e)}finally{B(!1)}},W=async e=>{B(!0);try{let a=await fetch("/api/toll");if(a.ok){let t=await a.json();if(t.success){let a=t.records.filter(a=>a.vehicleId===e).sort((e,a)=>new Date(e.date).getTime()-new Date(a.date).getTime());z(a)}}}catch(e){console.error("Error fetching toll records:",e)}finally{B(!1)}},[Y,X]=(0,s.useState)(null),[ee,ea]=(0,s.useState)({}),[et,er]=(0,s.useState)(!1),es=async e=>{try{(await fetch(`/api/toll?id=${e}`,{method:"DELETE"})).ok?(p.A.success("Data Tol berhasil dihapus"),A.vehicleId&&W(A.vehicleId)):p.A.error("Gagal menghapus data Tol")}catch(e){p.A.error("Terjadi kesalahan")}},el=async e=>{e.preventDefault(),er(!0);try{(await fetch("/api/toll",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ee)})).ok?(p.A.success("Data Tol berhasil diperbarui"),X(null),A.vehicleId&&W(A.vehicleId)):p.A.error("Gagal memperbarui data Tol")}catch(e){p.A.error("Terjadi kesalahan")}finally{er(!1)}},ei=async e=>{e.preventDefault(),S(!0);try{(await fetch("/api/fuel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)})).ok?(p.A.success("Data BBM berhasil disimpan!"),C({...P,liters:"",pricePerLiter:"",totalCost:"",remarks:""}),P.vehicleId&&Q(P.vehicleId)):p.A.error("Gagal menyimpan data BBM")}catch(e){console.error(e),p.A.error("Terjadi kesalahan saat menyimpan")}finally{S(!1)}},en=async e=>{try{(await fetch(`/api/fuel?id=${e}`,{method:"DELETE"})).ok?(p.A.success("Data berhasil dihapus"),P.vehicleId&&Q(P.vehicleId)):p.A.error("Gagal menghapus data")}catch(e){p.A.error("Terjadi kesalahan")}},[ed,ec]=(0,s.useState)(null),[eo,ex]=(0,s.useState)({}),[eh,em]=(0,s.useState)(!1),ep=e=>{ec(e),ex({...e,date:new Date(e.date).toISOString().split("T")[0],totalCost:e.totalCost.toString(),pricePerLiter:e.pricePerLiter.toString(),liters:e.liters.toString()})},eu=async e=>{e.preventDefault(),em(!0);try{(await fetch("/api/fuel",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(eo)})).ok?(p.A.success("Data berhasil diperbarui"),ec(null),P.vehicleId&&Q(P.vehicleId)):p.A.error("Gagal memperbarui data")}catch(e){p.A.error("Terjadi kesalahan")}finally{em(!1)}},eb=async e=>{e.preventDefault(),S(!0);try{(await fetch("/api/toll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)})).ok?(p.A.success("Data Tol berhasil disimpan!"),L({...A,cost:"",remarks:""}),A.vehicleId&&W(A.vehicleId)):p.A.error("Gagal menyimpan data Tol")}catch(e){console.error(e),p.A.error("Terjadi kesalahan saat menyimpan")}finally{S(!1)}},ej=a.find(e=>e.id===P.vehicleId),eg=ej&&["F 6878 G","F 2716 F"].includes(ej.licensePlate),ev=J&&["F 6878 G","F 2716 F"].includes(J.licensePlate),ey=e=>{let[a,t]=e.split("-").map(Number);return new Date(a,t,0)},ef=ey(q),eN=ey(G);return r.jsx(l.AuthGuard,{children:(0,r.jsxs)(i.DashboardLayout,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @media print {
            body * {
              visibility: hidden;
            }
            .print-area, .print-area * {
              visibility: visible;
            }
            .print-area {
              position: absolute;
              left: 0;
              top: 0;
              width: 100%;
            }
            /* Hide buttons during print */
            .no-print {
              display: none !important;
            }
            /* Ensure table borders are visible */
            table, th, td {
              border: 1px solid black !important;
            }
            /* Remove shadows for clean print */
            .print-area, .print-area * {
              box-shadow: none !important;
            }
          }
        `}}),r.jsx(k.Vq,{open:!!ed,onOpenChange:e=>!e&&ec(null),children:(0,r.jsxs)(k.cZ,{className:"max-w-xl",children:[(0,r.jsxs)(k.fK,{children:[r.jsx(k.$N,{children:"Edit Data BBM"}),r.jsx(k.Be,{children:"Ubah detail data pengisian BBM."})]}),(0,r.jsxs)("form",{onSubmit:eu,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Tanggal"}),r.jsx(c.I,{type:"date",required:!0,value:eo.date||"",onChange:e=>ex({...eo,date:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Driver"}),r.jsx(c.I,{value:eo.driver||"",onChange:e=>ex({...eo,driver:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Liter"}),r.jsx(c.I,{type:"number",step:"0.01",required:!0,value:eo.liters||"",onChange:e=>ex({...eo,liters:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Harga/Liter"}),r.jsx(c.I,{type:"number",required:!0,value:eo.pricePerLiter||"",onChange:e=>ex({...eo,pricePerLiter:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2 col-span-2",children:[r.jsx(o._,{children:"Total Biaya"}),r.jsx(c.I,{value:parseInt(eo.totalCost||"0").toLocaleString("id-ID"),disabled:!0,className:"bg-gray-100 font-bold"})]})]}),(0,r.jsxs)(k.cN,{children:[r.jsx(x.z,{type:"button",variant:"outline",onClick:()=>ec(null),children:"Batal"}),(0,r.jsxs)(x.z,{type:"submit",disabled:eh,children:[" ","Simpan Perubahan"," "]})]})]})]})}),(0,r.jsxs)("div",{className:"space-y-6 max-w-4xl mx-auto",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"Rekap BBM & Tol"})}),(0,r.jsxs)(d.mQ,{defaultValue:"bbm",className:"w-full",children:[(0,r.jsxs)(d.dr,{className:"grid w-full grid-cols-2 h-14 p-1 bg-slate-100/80 rounded-2xl mb-6",children:[(0,r.jsxs)(d.SP,{value:"bbm",className:"rounded-xl h-12 text-sm font-bold data-[state=active]:bg-white data-[state=active]:text-orange-600 data-[state=active]:shadow-md transition-all",children:[r.jsx(b,{className:"w-4 h-4 mr-2"}),"Input BBM"]}),(0,r.jsxs)(d.SP,{value:"tol",className:"rounded-xl h-12 text-sm font-bold data-[state=active]:bg-white data-[state=active]:text-blue-600 data-[state=active]:shadow-md transition-all",children:[r.jsx(j,{className:"w-4 h-4 mr-2"}),"Input TOL"]})]}),(0,r.jsxs)(d.nU,{value:"bbm",className:"mt-0",children:[(0,r.jsxs)(n.Zb,{className:"border-0 shadow-xl bg-white rounded-[2rem] overflow-hidden",children:[(0,r.jsxs)(n.Ol,{className:"bg-orange-50/50 border-b border-orange-100 px-8 py-6",children:[(0,r.jsxs)(n.ll,{className:"flex items-center gap-3 text-orange-900",children:[r.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:r.jsx(b,{className:"w-5 h-5 text-orange-600"})}),"Form Pengisian BBM"]}),r.jsx(n.SZ,{children:"Catat pengeluaran bahan bakar kendaraan operasional."})]}),r.jsx(n.aY,{className:"p-8",children:(0,r.jsxs)("form",{onSubmit:ei,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Tanggal"}),r.jsx(c.I,{type:"date",required:!0,value:P.date,onChange:e=>C({...P,date:e.target.value}),className:"rounded-xl"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Kendaraan"}),(0,r.jsxs)(h.Ph,{value:P.vehicleId,onValueChange:e=>C({...P,vehicleId:e}),required:!0,children:[r.jsx(h.i4,{className:"rounded-xl",children:r.jsx(h.ki,{placeholder:"Pilih Kendaraan"})}),r.jsx(h.Bw,{children:a.map(e=>(0,r.jsxs)(h.Ql,{value:e.id,children:[e.licensePlate," - ",e.brand," ",e.model]},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Driver"}),r.jsx(c.I,{placeholder:"Nama Pengemudi",value:P.driver,onChange:e=>C({...P,driver:e.target.value}),className:"rounded-xl"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Jenis BBM"}),(0,r.jsxs)(h.Ph,{value:P.fuelType,onValueChange:e=>C({...P,fuelType:e}),children:[r.jsx(h.i4,{className:"rounded-xl",children:r.jsx(h.ki,{placeholder:"Pilih Jenis BBM"})}),(0,r.jsxs)(h.Bw,{children:[r.jsx(h.Ql,{value:"Pertalite",children:"Pertalite"}),r.jsx(h.Ql,{value:"Pertamax",children:"Pertamax"}),r.jsx(h.Ql,{value:"Pertamax Turbo",children:"Pertamax Turbo"}),r.jsx(h.Ql,{value:"Solar",children:"Solar / Bio Solar"}),r.jsx(h.Ql,{value:"Dexlite",children:"Dexlite"}),r.jsx(h.Ql,{value:"Pertamina Dex",children:"Pertamina Dex"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Jumlah Liter"}),r.jsx(c.I,{type:"number",step:"0.01",placeholder:"0.00",required:!0,value:P.liters,onChange:e=>C({...P,liters:e.target.value}),className:"rounded-xl"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Harga per Liter (Rp)"}),r.jsx(c.I,{type:"number",placeholder:"0",required:!0,value:P.pricePerLiter,onChange:e=>C({...P,pricePerLiter:e.target.value}),className:"rounded-xl"})]})]}),(0,r.jsxs)("div",{className:"p-4 bg-orange-50 rounded-xl border border-orange-100 flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-orange-800",children:"Total Biaya"}),(0,r.jsxs)("span",{className:"text-xl font-extrabold text-orange-600",children:["Rp"," ",parseInt(P.totalCost||"0").toLocaleString("id-ID")]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Keterangan Tambahan"}),r.jsx(m.g,{placeholder:"Catatan...",value:P.remarks,onChange:e=>C({...P,remarks:e.target.value}),className:"rounded-xl resize-none"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx(x.z,{type:"button",variant:"outline",className:"rounded-xl",children:"Batal"}),(0,r.jsxs)(x.z,{type:"submit",disabled:u,className:"bg-orange-600 hover:bg-orange-700 text-white rounded-xl min-w-[140px]",children:[u?r.jsx(g.Z,{className:"w-4 h-4 animate-spin mr-2"}):r.jsx(v.Z,{className:"w-4 h-4 mr-2"}),"Simpan Data BBM"]})]})]})})]}),ej&&(0,r.jsxs)(n.Zb,{className:"border-0 shadow-xl bg-white rounded-[2rem] overflow-hidden mt-6 print-area",children:[(0,r.jsxs)(n.Ol,{className:"bg-white px-4 py-2 border-b border-gray-100 flex flex-row items-center justify-between",children:[r.jsx("div",{className:"w-[100px] flex justify-start",children:r.jsx(D,{})}),r.jsx("div",{className:"flex-1 text-center",children:(0,r.jsxs)(n.ll,{className:"font-bold text-black uppercase text-lg leading-snug",children:["REKAPITULASI BBM KENDARAAN ",eg?"RODA 2":"RODA 4",(0,r.jsxs)("div",{className:"text-xl mt-1",children:["(",ej.licensePlate,")"]})]})}),r.jsx("div",{className:"w-[100px] flex justify-end",children:(0,r.jsxs)(x.z,{variant:"outline",onClick:()=>window.print(),className:"no-print gap-2 border-gray-300 hover:bg-gray-100",children:[r.jsx(y,{className:"w-4 h-4"})," Print"]})})]}),(0,r.jsxs)(n.aY,{className:"p-4 overflow-x-auto",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center gap-3 no-print",children:[r.jsx(o._,{className:"text-sm font-medium text-gray-700",children:"Periode:"}),r.jsx(c.I,{type:"month",value:q,onChange:e=>Z(e.target.value),className:"w-48"})]}),(0,r.jsxs)("div",{className:"min-w-full inline-block align-middle",children:[r.jsx("div",{className:"border border-black",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-black",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"bg-white",children:[r.jsx("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black w-12",children:"NO"}),r.jsx("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black",children:"TANGGAL"}),r.jsx("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black",children:"LITER"}),r.jsx("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black",children:"HARGA SATUAN"}),r.jsx("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black",children:"JUMLAH"}),r.jsx("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black width-24 no-print",children:"AKSI"})]})}),(0,r.jsxs)("tbody",{className:"divide-y divide-black",children:[V.length>0?(e=0,V.map((a,t)=>{let s=t>0&&new Date(a.date).toDateString()===new Date(V[t-1].date).toDateString();return!s&&e++,(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black font-medium",children:!s&&e}),r.jsx("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black",children:!s&&new Date(a.date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}),r.jsx("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black",children:a.liters?.toLocaleString("id-ID",{minimumFractionDigits:3,maximumFractionDigits:3})}),r.jsx("td",{className:"px-3 py-2 text-right text-sm text-black border-r border-black",children:(0,r.jsxs)("div",{className:"flex justify-between w-full px-2",children:[r.jsx("span",{children:"Rp"}),r.jsx("span",{children:a.pricePerLiter?.toLocaleString("id-ID")})]})}),r.jsx("td",{className:"px-3 py-2 text-right text-sm text-black font-medium border-r border-black",children:(0,r.jsxs)("div",{className:"flex justify-between w-full px-2",children:[r.jsx("span",{children:"Rp"}),r.jsx("span",{children:a.totalCost?.toLocaleString("id-ID")})]})}),r.jsx("td",{className:"px-3 py-2 text-center no-print border-r border-black",children:(0,r.jsxs)("div",{className:"flex justify-center gap-1",children:[r.jsx(x.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-600 hover:text-blue-800 hover:bg-blue-50",onClick:()=>ep(a),children:r.jsx(f,{className:"w-4 h-4"})}),(0,r.jsxs)(w.aR,{children:[r.jsx(w.vW,{asChild:!0,children:r.jsx(x.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600 hover:text-red-800 hover:bg-red-50",children:r.jsx(N.Z,{className:"w-4 h-4"})})}),(0,r.jsxs)(w._T,{children:[(0,r.jsxs)(w.fY,{children:[r.jsx(w.f$,{children:"Hapus Data?"}),r.jsx(w.yT,{children:"Data ini akan dihapus permanen."})]}),(0,r.jsxs)(w.xo,{children:[r.jsx(w.le,{children:"Batal"}),r.jsx(w.OL,{onClick:()=>en(a.id),className:"bg-red-600",children:"Hapus"})]})]})]})]})})]},a.id)})):r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-3 py-8 text-center text-sm text-gray-500 italic",children:"Belum ada data untuk kendaraan ini"})}),(0,r.jsxs)("tr",{className:"bg-white font-bold border-t-2 border-black",children:[r.jsx("td",{colSpan:2,className:"px-3 py-2 text-center text-sm text-black border-r border-black uppercase tracking-wider",children:"TOTAL"}),r.jsx("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black",children:H.toLocaleString("id-ID",{minimumFractionDigits:3,maximumFractionDigits:3})}),r.jsx("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black bg-gray-100"}),r.jsx("td",{className:"px-3 py-2 text-right text-sm text-black",children:(0,r.jsxs)("div",{className:"flex justify-between w-full px-2",children:[r.jsx("span",{children:"Rp"}),r.jsx("span",{children:U.toLocaleString("id-ID")})]})}),r.jsx("td",{className:"no-print"})]})]})]})}),r.jsx("div",{className:"mt-12 flex justify-end",children:(0,r.jsxs)("div",{className:"text-center w-64",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-black mb-1",children:["Bogor,"," ",ef.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})]}),r.jsx("p",{className:"text-sm font-medium text-black mb-16",children:"Mengetahui,"}),r.jsx("p",{className:"text-sm font-bold text-black",children:V.filter(e=>e.driver).pop()?.driver||""})]})})]})]})]})]}),(0,r.jsxs)(d.nU,{value:"tol",className:"mt-0",children:[(0,r.jsxs)(n.Zb,{className:"border-0 shadow-xl bg-white rounded-[2rem] overflow-hidden",children:[(0,r.jsxs)(n.Ol,{className:"bg-blue-50/50 border-b border-blue-100 px-8 py-6",children:[(0,r.jsxs)(n.ll,{className:"flex items-center gap-3 text-blue-900",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(j,{className:"w-5 h-5 text-blue-600"})}),"Form Pengeluaran TOL"]}),r.jsx(n.SZ,{children:"Catat biaya e-Toll untuk perjalanan dinas."})]}),r.jsx(n.aY,{className:"p-8",children:(0,r.jsxs)("form",{onSubmit:eb,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Tanggal"}),r.jsx(c.I,{type:"date",required:!0,value:A.date,onChange:e=>L({...A,date:e.target.value}),className:"rounded-xl"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Kendaraan"}),(0,r.jsxs)(h.Ph,{value:A.vehicleId,onValueChange:e=>L({...A,vehicleId:e}),required:!0,children:[r.jsx(h.i4,{className:"rounded-xl",children:r.jsx(h.ki,{placeholder:"Pilih Kendaraan"})}),r.jsx(h.Bw,{children:a.map(e=>(0,r.jsxs)(h.Ql,{value:e.id,children:[e.licensePlate," - ",e.brand," ",e.model]},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Driver"}),r.jsx(c.I,{placeholder:"Nama Pengemudi",value:A.driver,onChange:e=>L({...A,driver:e.target.value}),className:"rounded-xl"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Biaya Tol (Rp)"}),r.jsx(c.I,{type:"number",placeholder:"0",required:!0,value:A.cost,onChange:e=>L({...A,cost:e.target.value}),className:"rounded-xl"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Keterangan Tambahan"}),r.jsx(m.g,{placeholder:"Catatan...",value:A.remarks,onChange:e=>L({...A,remarks:e.target.value}),className:"rounded-xl resize-none"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx(x.z,{type:"button",variant:"outline",className:"rounded-xl",children:"Batal"}),(0,r.jsxs)(x.z,{type:"submit",disabled:u,className:"bg-blue-600 hover:bg-blue-700 text-white rounded-xl min-w-[140px]",children:[u?r.jsx(g.Z,{className:"w-4 h-4 animate-spin mr-2"}):r.jsx(v.Z,{className:"w-4 h-4 mr-2"}),"Simpan Data Tol"]})]})]})})]}),J&&(0,r.jsxs)(n.Zb,{className:"border-0 shadow-xl bg-white rounded-[2rem] overflow-hidden mt-6 print-area",children:[(0,r.jsxs)(n.Ol,{className:"bg-white px-4 py-2 border-b border-gray-100 flex flex-row items-center justify-between",children:[r.jsx("div",{className:"w-[100px] flex justify-start",children:r.jsx(D,{})}),r.jsx("div",{className:"flex-1 text-center",children:(0,r.jsxs)(n.ll,{className:"font-bold text-black uppercase text-lg leading-snug",children:["REKAPITULASI E-TOL KENDARAAN ",ev?"RODA 2":"RODA 4",(0,r.jsxs)("div",{className:"text-xl mt-1",children:["(",J.licensePlate,")"]})]})}),r.jsx("div",{className:"w-[100px] flex justify-end",children:(0,r.jsxs)(x.z,{variant:"outline",onClick:()=>window.print(),className:"no-print gap-2 border-gray-300 hover:bg-gray-100",children:[r.jsx(y,{className:"w-4 h-4"})," Print"]})})]}),(0,r.jsxs)(n.aY,{className:"p-4 overflow-x-auto",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center gap-3 no-print",children:[r.jsx(o._,{className:"text-sm font-medium text-gray-700",children:"Periode:"}),r.jsx(c.I,{type:"month",value:G,onChange:e=>K(e.target.value),className:"w-48"})]}),(0,r.jsxs)("div",{className:"min-w-full inline-block align-middle",children:[r.jsx("div",{className:"border border-black",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-black",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"bg-white",children:[r.jsx("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black w-12",children:"NO"}),r.jsx("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black",children:"TANGGAL"}),r.jsx("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black",children:"HARGA SATUAN"}),r.jsx("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black",children:"JUMLAH VOLUME"}),r.jsx("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black",children:"JUMLAH"}),r.jsx("th",{scope:"col",className:"px-3 py-2 text-center text-sm font-bold text-black border-r border-black width-24 no-print",children:"AKSI"})]})}),(0,r.jsxs)("tbody",{className:"divide-y divide-black",children:[F.length>0?(()=>{let e=new Map;F.forEach(a=>{let t=new Date(a.date).toDateString();e.has(t)||e.set(t,new Map);let r=e.get(t),s=Number(a.cost)||0;r.has(s)||r.set(s,{count:0,total:0,records:[]});let l=r.get(s);l.count+=1,l.total+=s,l.records.push(a)});let a=0,t=[];return e.forEach((e,s)=>{a++;let l=!0;e.forEach((e,i)=>{t.push((0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black font-medium",children:l?a:""}),r.jsx("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black",children:l?new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}):""}),r.jsx("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black",children:(0,r.jsxs)("div",{className:"flex justify-between w-full px-2",children:[r.jsx("span",{children:"Rp"}),r.jsx("span",{children:Number(i).toLocaleString("id-ID")})]})}),r.jsx("td",{className:"px-3 py-2 text-center text-sm text-black border-r border-black",children:e.count}),r.jsx("td",{className:"px-3 py-2 text-right text-sm text-black font-medium border-r border-black",children:(0,r.jsxs)("div",{className:"flex justify-between w-full px-2",children:[r.jsx("span",{children:"Rp"}),r.jsx("span",{children:e.total.toLocaleString("id-ID")})]})}),r.jsx("td",{className:"px-3 py-2 text-center no-print border-r border-black",children:r.jsx("div",{className:"flex justify-center",children:(0,r.jsxs)(w.aR,{children:[r.jsx(w.vW,{asChild:!0,children:r.jsx(x.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600 hover:text-red-800 hover:bg-red-50",children:r.jsx(N.Z,{className:"w-4 h-4"})})}),(0,r.jsxs)(w._T,{children:[(0,r.jsxs)(w.fY,{children:[(0,r.jsxs)(w.f$,{children:["Hapus ",e.count," Data?"]}),r.jsx(w.yT,{children:e.count>1?`Semua ${e.count} transaksi dengan harga Rp ${Number(i).toLocaleString("id-ID")} pada tanggal ini akan dihapus permanen.`:"Data ini akan dihapus permanen."})]}),(0,r.jsxs)(w.xo,{children:[r.jsx(w.le,{children:"Batal"}),r.jsx(w.OL,{onClick:()=>{e.records.forEach(e=>es(e.id))},className:"bg-red-600",children:"Hapus"})]})]})]})})})]},`${s}-${i}`)),l=!1})}),t})():r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-3 py-8 text-center text-sm text-gray-500 italic",children:"Belum ada data untuk kendaraan ini"})}),(0,r.jsxs)("tr",{className:"bg-white font-bold border-t-2 border-black",children:[r.jsx("td",{colSpan:4,className:"px-3 py-2 text-center text-sm text-black border-r border-black uppercase tracking-wider",children:"TOTAL"}),r.jsx("td",{className:"px-3 py-2 text-right text-sm text-black font-medium border-r border-black",children:(0,r.jsxs)("div",{className:"flex justify-between w-full px-2",children:[r.jsx("span",{children:"Rp"}),r.jsx("span",{children:$.toLocaleString("id-ID")})]})}),r.jsx("td",{className:"no-print"})]})]})]})}),r.jsx("div",{className:"mt-12 flex justify-end",children:(0,r.jsxs)("div",{className:"text-center w-64",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-black mb-1",children:["Bogor,"," ",eN.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})]}),r.jsx("p",{className:"text-sm font-medium text-black mb-16",children:"Mengetahui,"}),r.jsx("p",{className:"text-sm font-bold text-black",children:F.filter(e=>e.driver).pop()?.driver||""})]})})]})]})]})]})]}),r.jsx(k.Vq,{open:!!Y,onOpenChange:e=>!e&&X(null),children:(0,r.jsxs)(k.cZ,{className:"max-w-xl",children:[(0,r.jsxs)(k.fK,{children:[r.jsx(k.$N,{children:"Edit Data Tol"}),r.jsx(k.Be,{children:"Ubah detail data pengeluaran Tol."})]}),(0,r.jsxs)("form",{onSubmit:el,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Tanggal"}),r.jsx(c.I,{type:"date",required:!0,value:ee.date||"",onChange:e=>ea({...ee,date:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{children:"Driver"}),r.jsx(c.I,{value:ee.driver||"",onChange:e=>ea({...ee,driver:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2 col-span-2",children:[r.jsx(o._,{children:"Biaya Tol"}),r.jsx(c.I,{type:"number",required:!0,value:ee.cost||"",onChange:e=>ea({...ee,cost:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2 col-span-2",children:[r.jsx(o._,{children:"Keterangan"}),r.jsx(c.I,{value:ee.remarks||"",onChange:e=>ea({...ee,remarks:e.target.value})})]})]}),(0,r.jsxs)(k.cN,{children:[r.jsx(x.z,{type:"button",variant:"outline",onClick:()=>X(null),children:"Batal"}),(0,r.jsxs)(x.z,{type:"submit",disabled:et,children:[" ","Simpan Perubahan"," "]})]})]})]})})]})]})})}},73427:(e,a,t)=>{"use strict";t.d(a,{mQ:()=>P,nU:()=>L,dr:()=>C,SP:()=>A});var r=t(10326),s=t(17577),l=t(82561),i=t(93095),n=t(15594),d=t(9815),c=t(45226),o=t(17124),x=t(52067),h=t(88957),m="Tabs",[p,u]=(0,i.b)(m,[n.Pc]),b=(0,n.Pc)(),[j,g]=p(m),v=s.forwardRef((e,a)=>{let{__scopeTabs:t,value:s,onValueChange:l,defaultValue:i,orientation:n="horizontal",dir:d,activationMode:m="automatic",...p}=e,u=(0,o.gm)(d),[b,g]=(0,x.T)({prop:s,onChange:l,defaultProp:i});return(0,r.jsx)(j,{scope:t,baseId:(0,h.M)(),value:b,onValueChange:g,orientation:n,dir:u,activationMode:m,children:(0,r.jsx)(c.WV.div,{dir:u,"data-orientation":n,...p,ref:a})})});v.displayName=m;var y="TabsList",f=s.forwardRef((e,a)=>{let{__scopeTabs:t,loop:s=!0,...l}=e,i=g(y,t),d=b(t);return(0,r.jsx)(n.fC,{asChild:!0,...d,orientation:i.orientation,dir:i.dir,loop:s,children:(0,r.jsx)(c.WV.div,{role:"tablist","aria-orientation":i.orientation,...l,ref:a})})});f.displayName=y;var N="TabsTrigger",k=s.forwardRef((e,a)=>{let{__scopeTabs:t,value:s,disabled:i=!1,...d}=e,o=g(N,t),x=b(t),h=S(o.baseId,s),m=I(o.baseId,s),p=s===o.value;return(0,r.jsx)(n.ck,{asChild:!0,...x,focusable:!i,active:p,children:(0,r.jsx)(c.WV.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":m,"data-state":p?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:h,...d,ref:a,onMouseDown:(0,l.M)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(s)}),onKeyDown:(0,l.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(s)}),onFocus:(0,l.M)(e.onFocus,()=>{let e="manual"!==o.activationMode;p||i||!e||o.onValueChange(s)})})})});k.displayName=N;var w="TabsContent",D=s.forwardRef((e,a)=>{let{__scopeTabs:t,value:l,forceMount:i,children:n,...o}=e,x=g(w,t),h=S(x.baseId,l),m=I(x.baseId,l),p=l===x.value,u=s.useRef(p);return s.useEffect(()=>{let e=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,r.jsx)(d.z,{present:i||p,children:({present:t})=>(0,r.jsx)(c.WV.div,{"data-state":p?"active":"inactive","data-orientation":x.orientation,role:"tabpanel","aria-labelledby":h,hidden:!t,id:m,tabIndex:0,...o,ref:a,style:{...e.style,animationDuration:u.current?"0s":void 0},children:t&&n})})});function S(e,a){return`${e}-trigger-${a}`}function I(e,a){return`${e}-content-${a}`}D.displayName=w;var T=t(77863);function P({className:e,...a}){return r.jsx(v,{"data-slot":"tabs",className:(0,T.cn)("flex flex-col gap-2",e),...a})}function C({className:e,...a}){return r.jsx(f,{"data-slot":"tabs-list",className:(0,T.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...a})}function A({className:e,...a}){return r.jsx(k,{"data-slot":"tabs-trigger",className:(0,T.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a})}function L({className:e,...a}){return r.jsx(D,{"data-slot":"tabs-content",className:(0,T.cn)("flex-1 outline-none",e),...a})}},87673:(e,a,t)=>{"use strict";t.d(a,{g:()=>l});var r=t(10326);t(17577);var s=t(77863);function l({className:e,...a}){return r.jsx("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}},77506:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(62881).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},33135:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`D:\kendaraan\app\dashboard\rekap-bbm-tol\page.tsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[276,366,338,839,471,817,841],()=>t(79553));module.exports=r})();