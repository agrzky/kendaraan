exports.id=817,exports.ids=[817],exports.modules={10147:(e,t,a)=>{Promise.resolve().then(a.bind(a,54452)),Promise.resolve().then(a.bind(a,85999))},1400:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},58894:(e,t,a)=>{"use strict";a.d(t,{AuthGuard:()=>d,a:()=>o});var s=a(10326),r=a(17577),n=a(35047);let i=(0,r.createContext)(null);function d({children:e,requiredRoles:t}){let[a,d]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),h=(0,n.useRouter)(),m=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/auth/me",{credentials:"include",cache:"no-store"});if(!e.ok){if(401===e.status&&(await fetch("/api/auth/refresh",{method:"POST",credentials:"include"})).ok){let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let a=await e.json();if(u(a.user),d(!0),t&&!t.includes(a.user.role)){h.push("/dashboard");return}l(!1);return}}h.push("/");return}let a=await e.json();if(a.authenticated&&a.user){if(u(a.user),d(!0),t&&!t.includes(a.user.role)){h.push("/dashboard");return}}else h.push("/")}catch(e){console.error("Auth check error:",e),h.push("/")}finally{l(!1)}},[h,t]);return((0,r.useCallback)(async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(e){console.error("Logout error:",e)}finally{h.push("/")}},[h]),o)?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Memuat..."})]})}):a?s.jsx(i.Provider,{value:{user:c,loading:o,isAdmin:c?.role==="admin",isAuthenticated:a,refetch:m},children:e}):null}function o(){let e=(0,r.useContext)(i),[t,a]=(0,r.useState)(null),[s,n]=(0,r.useState)(!e);return e||{user:t,loading:s,isAdmin:t?.role==="admin",isAuthenticated:!!t,refetch:async()=>{}}}},63207:(e,t,a)=>{"use strict";a.d(t,{DashboardLayout:()=>R});var s=a(10326),r=a(17577),n=a(35047),i=a(90772),d=a(98958),o=a(94019),l=a(77863);function c({...e}){return s.jsx(d.fC,{"data-slot":"sheet",...e})}function u({...e}){return s.jsx(d.xz,{"data-slot":"sheet-trigger",...e})}function h({...e}){return s.jsx(d.h_,{"data-slot":"sheet-portal",...e})}function m({className:e,...t}){return s.jsx(d.aV,{"data-slot":"sheet-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function x({className:e,children:t,side:a="right",...r}){return(0,s.jsxs)(h,{children:[s.jsx(m,{}),(0,s.jsxs)(d.VY,{"data-slot":"sheet-content",className:(0,l.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===a&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===a&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===a&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===a&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...r,children:[t,(0,s.jsxs)(d.x8,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[s.jsx(o.Z,{className:"size-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}var f=a(79313);function g({...e}){return s.jsx(f.fC,{"data-slot":"dropdown-menu",...e})}function p({...e}){return s.jsx(f.xz,{"data-slot":"dropdown-menu-trigger",...e})}function b({className:e,sideOffset:t=4,...a}){return s.jsx(f.Uv,{children:s.jsx(f.VY,{"data-slot":"dropdown-menu-content",sideOffset:t,className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...a})})}function v({className:e,inset:t,variant:a="default",...r}){return s.jsx(f.ck,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":a,className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}var j=a(4150);let w=r.forwardRef(({className:e,...t},a)=>s.jsx(j.fC,{ref:a,"data-slot":"avatar",className:(0,l.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...t}));w.displayName=j.fC.displayName,r.forwardRef(({className:e,...t},a)=>s.jsx(j.Ee,{ref:a,"data-slot":"avatar-image",className:(0,l.cn)("aspect-square size-full",e),...t})).displayName=j.Ee.displayName;let N=r.forwardRef(({className:e,...t},a)=>s.jsx(j.NY,{ref:a,"data-slot":"avatar-fallback",className:(0,l.cn)("bg-muted flex size-full items-center justify-center rounded-full",e),...t}));N.displayName=j.NY.displayName;var y=a(29798),k=a(81536),z=a(67048),S=a(95964),P=a(26754),C=a(90748),Z=a(71810),_=a(46226),K=a(58894);let O=[{name:"Dashboard",href:"/dashboard",icon:y.Z},{name:"Data Kendaraan",href:"/dashboard/vehicles",icon:k.Z},{name:"Riwayat Servis",href:"/dashboard/service-history",icon:z.Z},{name:"Rekap BBM&TOL",href:"/dashboard/rekap-bbm-tol",icon:S.Z},{name:"Laporan",href:"/dashboard/reports",icon:P.Z}];function R({children:e}){let[t,a]=(0,r.useState)(!1),[d,o]=(0,r.useState)(!1),l=(0,n.useRouter)(),h=(0,n.usePathname)(),{user:m,isAdmin:f}=(0,K.a)(),j=async()=>{o(!0);try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(e){console.error("Logout error:",e)}finally{l.push("/"),l.refresh()}},y=({mobile:e=!1})=>(0,s.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 px-6 py-8",children:[s.jsx("div",{className:"relative w-12 h-12 flex items-center justify-center",children:s.jsx(_.default,{src:"/logo-bkn.png",alt:"Logo BKN",width:48,height:48,className:"object-contain drop-shadow-md"})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsxs)("h1",{className:"font-bold text-gray-900 text-lg leading-tight",children:["Pusbang",s.jsx("span",{className:"text-emerald-600",children:"SDM"})]}),s.jsx("p",{className:"text-[10px] text-gray-500 font-semibold uppercase tracking-wider",children:"Bagian Kendaraan"})]})]}),(0,s.jsxs)("nav",{className:"flex-1 px-4 py-4 space-y-2 overflow-y-auto custom-scrollbar",children:[s.jsx("p",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Menu Utama"}),O.map(t=>{let r=t.icon,n=h===t.href;return s.jsx("div",{children:(0,s.jsxs)(i.z,{variant:"ghost",className:`w-full justify-start gap-4 h-12 text-sm font-medium transition-all duration-300 rounded-2xl relative overflow-hidden ${n?"text-white shadow-lg shadow-emerald-500/20":"text-gray-600 hover:text-emerald-700"}`,onClick:()=>{l.push(t.href),e&&a(!1)},children:[n&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl"}),(0,s.jsxs)("div",{className:"relative z-10 flex items-center gap-4",children:[s.jsx(r,{className:`w-5 h-5 flex-shrink-0 ${n?"text-white":"text-gray-400 group-hover:text-emerald-500"}`}),s.jsx("span",{className:"truncate",children:t.name})]})]})},t.name)})]})]});return(0,s.jsxs)("div",{className:"min-h-screen relative overflow-hidden bg-slate-50",children:[s.jsx("div",{className:"fixed inset-0 overflow-hidden pointer-events-none -z-10",children:s.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-[0.03] mix-blend-multiply"})}),s.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-72 lg:flex-col p-4 z-50",children:s.jsx("div",{className:"flex flex-col flex-grow bg-white border border-gray-200/50 rounded-[2rem] shadow-xl shadow-gray-200/50 overflow-hidden",children:s.jsx(y,{})})}),s.jsx(c,{open:t,onOpenChange:a,children:s.jsx(x,{side:"left",className:"p-0 w-72 bg-transparent border-0 shadow-none",children:s.jsx("div",{className:"h-full w-full bg-white/90 backdrop-blur-3xl border-r border-white/40 p-4",children:s.jsx(y,{mobile:!0})})})}),(0,s.jsxs)("div",{className:"lg:pl-72 flex flex-col min-h-screen",children:[s.jsx("div",{className:"sticky top-4 z-40 px-4 lg:px-6 mb-2",children:(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl border border-white/50 rounded-2xl shadow-sm px-4 py-3 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4 min-w-0 flex-1",children:[(0,s.jsxs)(c,{children:[s.jsx(u,{asChild:!0,children:s.jsx(i.z,{variant:"ghost",size:"sm",className:"lg:hidden p-2 hover:bg-white/50",children:s.jsx(C.Z,{className:"w-5 h-5"})})}),s.jsx(x,{side:"left",className:"p-0 w-72 bg-transparent border-0",children:s.jsx("div",{className:"h-full w-full bg-white/80 backdrop-blur-3xl border-r border-white/40 p-4",children:s.jsx(y,{mobile:!0})})})]}),s.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-slate-800 to-slate-600 truncate ml-2",children:(()=>{let e=O.find(e=>e.href===h);return e?.name||"Dashboard"})()})]}),(0,s.jsxs)(g,{children:[s.jsx(p,{asChild:!0,children:s.jsx(i.z,{variant:"ghost",className:"relative h-10 w-10 rounded-full ring-2 ring-white/50 shadow-sm hover:ring-emerald-400/50 transition-all",children:s.jsx(w,{className:"h-10 w-10",children:s.jsx(N,{className:"bg-gradient-to-br from-emerald-500 to-teal-600 text-white font-bold",children:"A"})})})}),(0,s.jsxs)(b,{className:"w-56 bg-white/80 backdrop-blur-xl border-white/50 rounded-xl shadow-lg",align:"end",children:[s.jsx("div",{className:"flex items-center justify-start gap-3 p-3 bg-emerald-50/50 rounded-lg mb-1",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-0.5 leading-none",children:[s.jsx("p",{className:"font-bold text-gray-800",children:m?.name||"User"}),s.jsx("p",{className:"text-xs text-gray-500",children:m?.email}),f&&s.jsx("span",{className:"text-[10px] text-emerald-600 font-semibold uppercase",children:"Admin"})]})}),(0,s.jsxs)(v,{onSelect:j,disabled:d,className:"text-red-600 focus:bg-red-50 focus:text-red-700 cursor-pointer rounded-lg my-1",children:[s.jsx(Z.Z,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:d?"Keluar...":"Keluar"})]})]})]})]})}),s.jsx("main",{className:"flex-1 p-4 lg:p-6 pt-2",children:e})]})]})}},90772:(e,t,a)=>{"use strict";a.d(t,{d:()=>o,z:()=>l});var s=a(10326),r=a(17577),n=a(34214),i=a(79360),d=a(77863);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef(({className:e,variant:t,size:a,asChild:r=!1,...i},l)=>{let c=r?n.g7:"button";return s.jsx(c,{"data-slot":"button",className:(0,d.cn)(o({variant:t,size:a,className:e})),ref:l,...i})});l.displayName="Button"},33071:(e,t,a)=>{"use strict";a.d(t,{Ol:()=>i,SZ:()=>o,Zb:()=>n,aY:()=>l,ll:()=>d});var s=a(10326);a(17577);var r=a(77863);function n({className:e,...t}){return s.jsx("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function i({className:e,...t}){return s.jsx("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function d({className:e,...t}){return s.jsx("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...t})}function o({className:e,...t}){return s.jsx("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...t})}function l({className:e,...t}){return s.jsx("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...t})}},77863:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(41135),r=a(31009);function n(...e){return(0,r.m6)((0,s.W)(e))}},11506:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u,metadata:()=>c});var s=a(19510),r=a(91228),n=a.n(r),i=a(96550),d=a.n(i),o=a(441),l=a(51032);a(67272);let c={title:"Sistem Manajemen Servis Kendaraan - BKN",description:"Sistem Manajemen Servis Kendaraan Operasional PusbangSDM BKN",icons:{icon:"/logo-bkn.png",apple:"/logo-bkn.png"}};function u({children:e}){return s.jsx("html",{lang:"en",children:(0,s.jsxs)("body",{className:`font-sans antialiased ${n().variable} ${d().variable}`,children:[e,s.jsx(l.x7,{position:"top-right",richColors:!0}),s.jsx(o.c,{})]})})}},67272:()=>{}};